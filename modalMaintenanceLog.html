<div id="modalMaintenanceLog" class="modal-maint-overlay">
  <div class="maint-container">

    <div class="maint-top-nav">
      <button onclick="openCustomScanner();" class="btn-maint-tool btn-scan">
        <i class="fas fa-qrcode"></i> SCAN QR
      </button> 
      <button onclick="openGlobalSearch(); window.isMaintMode=true;" class="btn-maint-tool btn-manual">
        <i class="fas fa-list"></i> MANUAL
      </button>
      <button onclick="closeMaintenanceMode()" class="btn-close-maint">BATAL</button>
    </div>

    <div class="maint-header-info">
      <div class="info-grid-main">
        <div class="info-box-highlight">
          <small style="color: var(--neon-gold); font-size: 10px;">UNIT ID</small>
          <span id="log_as_id" style="font-weight: bold; font-size: 1.1rem; color: #fff;">-</span>
        </div>
        <div>
          <label style="font-size: 11px; color: var(--neon-gold); font-weight: bold;">ID JADWAL</label>
          <select id="jenis_id_jadwal" class="select-maint-neon">
            <option value=""> Memuat...</option>
          </select>
        </div>
      </div>

      <div class="info-grid-details" style="margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;">
        <div><label>TYPE:</label> <span id="log_ui_type">-</span></div>
        <div><label>ID ASSET:</label> <span id="log_ui_asid">-</span></div>
        <div><label>NAMA:</label> <span id="log_ui_nama">-</span></div>
        <div><label>LOKASI:</label> <span id="log_ui_lokasi">-</span></div>
      </div>
    </div>

    <input type="hidden" id="log_maint_id">
    <input type="hidden" id="log_pending">
    <input type="hidden" id="log_maint_row">
    <input type="hidden" id="log_time_mulai">
    <input type="hidden" id="log_petugas">
    <input type="hidden" id="Act_online"> 
    <canvas id="photoCanvas" style="display:none;"></canvas>
    <div class="maint-section">
      <label class="section-label">CATATAN KERJA (NOTE)</label>
      <textarea id="log_pekerjaan" placeholder="Tuliskan detail perbaikan..." class="textarea-maint"></textarea>
    </div>

    <p class="section-label-icon"><i class="fas fa-camera-retro"></i> DOKUMENTASI FOTO</p>
    <div class="photo-stack-maint">
      
      <div class="photo-group">
        <div class="photo-btn-large" id="btn_PB" onclick="capturePhoto('PB')">
          <div id="prev_PB"><i class="fas fa-camera"></i> BEFORE (PB)</div>
        </div>
        <div id="thumb_area_PB" class="thumb-area-maint"></div>
      </div>

      <div class="photo-group">
        <div class="photo-btn-large" id="btn_PO" onclick="capturePhoto('PO')">
          <div id="prev_PO"><i class="fas fa-tools"></i> ON WORK (PO)</div>
        </div>
        <div id="thumb_area_PO" class="thumb-area-maint"></div>
      </div>

      <div class="photo-group">
        <div class="photo-btn-large" id="btn_PA" onclick="capturePhoto('PA')">
          <div id="prev_PA"><i class="fas fa-check-double"></i> AFTER (PA)</div>
        </div>
        <div id="thumb_area_PA" class="thumb-area-maint"></div>
      </div>

      <div class="photo-group">
        <div class="photo-btn-large" id="btn_PC" onclick="capturePhoto('PC')">
          <div id="prev_PC"><i class="fas fa-clipboard-list"></i> CHECKSHEET</div>
        </div>
        <div id="thumb_area_PC" class="thumb-area-maint"></div>
      </div>

      <input type="file" id="logPhotoInput" accept="image/*" style="display:none" onchange="handleLogPhotoSelect(this)">
    </div>

    <div class="maint-footer">
      <button id="btnLogPending" onclick="saveLog('Pending')" class="btn-maint-action btn-pending">
        <i class="fas fa-pause"></i> PENDING
      </button>
      <button id="btnLogSelesai" onclick="saveLog('Selesai')" class="btn-maint-action btn-finish">
        <i class="fas fa-check-circle"></i> SELESAI
      </button>
    </div>

  </div>
</div>