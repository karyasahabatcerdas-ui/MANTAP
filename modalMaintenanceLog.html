<div id="modalMaintenanceLog" class="modal-maint-overlay">
  <div class="maint-container">

    <div class="maint-top-nav">
      <canvas id="photoCanvas" style="display:none;"></canvas>
      <button onclick="openCustomScanner();" class="btn-maint-tool btn-scan">
        <i class="fa-solid fa-qrcode"></i> SCAN QR UNIT
      </button> 
      <div id="qr-reader-dummy" style="display:none;"></div>
      <button onclick="openGlobalSearch(); window.isMaintMode=true;" class="btn-maint-tool btn-manual">
        <i class="fa-solid fa-list"></i> PILIH MANUAL
      </button>      
    </div>

    <div class="maint-title-bar">
      <h3><i class="fa-solid fa-tools"></i> MAINTENANCE WORKER</h3>
      <button onclick="closeMaintenanceMode()" class="btn-close-maint">BATAL</button>
    </div>

    <input type="hidden" id="log_maint_id"><input type="hidden" id="log_pending">
    <input type="hidden" id="log_maint_row"><input type="hidden" id="log_time_mulai">
    <input type="hidden" id="log_petugas"><input type="hidden" id="Act_online">      

    <div class="maint-info-card">
      <div class="info-grid-main">
        <div class="info-box-highlight">
          <label>UNIT ID</label>
          <span id="log_as_id">-</span>
        </div>
        <div class="info-box-select">
          <label>ID JADWAL</label>
          <select id="jenis_id_jadwal" class="select-maint-neon">
            <option value="">Memuat...</option>
          </select>
        </div>
      </div>

      <div class="info-grid-details">
        <div><label>TYPE:</label> <span id="log_ui_type">-</span></div>
        <div><label>ID ASSET:</label> <span id="log_ui_asid">-</span></div>
        <div><label>NAMA:</label> <span id="log_ui_nama">-</span></div>
        <div><label>LOKASI:</label> <span id="log_ui_lokasi">-</span></div>
      </div>
    </div>

    <div class="maint-section">
      <label class="section-label">CATATAN KERJA (NOTE)</label>
      <textarea id="log_pekerjaan" placeholder="Tuliskan detail perbaikan..." class="textarea-maint"></textarea>
    </div>

    <p class="section-label-icon"><i class="fa-solid fa-camera-retro"></i> DOKUMENTASI FOTO (MAKS 5MB)</p>
    <div class="photo-grid-maint">
      <div class="photo-btn-large" id="btn_PB" onclick="capturePhoto('PB')">
        <div id="prev_PB"><i class="fa-solid fa-camera"></i><br>BEFORE (PB)</div>
      </div>
      <div class="photo-btn-large" id="btn_PO" onclick="capturePhoto('PO')">
        <div id="prev_PO"><i class="fa-solid fa-tools"></i><br>ON WORK (PO)</div>
      </div>
      <div class="photo-btn-large" id="btn_PA" onclick="capturePhoto('PA')">
        <div id="prev_PA"><i class="fa-solid fa-check-double"></i><br>AFTER (PA)</div>
      </div>
      <div class="photo-btn-large" id="btn_PC" onclick="capturePhoto('PC')">
        <div id="prev_PC"><i class="fa-solid fa-clipboard-list"></i><br>CHECKSHEET</div>
      </div>
      <input type="file" id="logPhotoInput" accept="image/*" style="display:none" onchange="handleLogPhotoSelect(this)">
    </div>

    <div class="maint-footer">
      <button id="btnLogPending" onclick="saveLog('Pending')" class="btn-maint-action btn-pending">
        <i class="fa-solid fa-pause"></i> PENDING
      </button>
      <button id="btnLogSelesai" onclick="saveLog('Selesai')" class="btn-maint-action btn-finish">
        <i class="fa-solid fa-check-circle"></i> SELESAI
      </button>
    </div>

  </div>
</div>